
<!DOCTYPE html>
<html lang="en">

<meta charset="utf-8">
<link rel="stylesheet" href="virgule.css">

<title>Virgule</title>

<div class="main">
    <div class="toolbar">
        <select id="examples-sel">
            <option value="" selected>Select an example</option>
            <option value="hello-asm/hello.hex">Hello</option>
            <option value="echo-asm/echo.hex">Echo</option>
            <option value="bitmap-asm/bitmap.hex">Bitmap</option>
            <option value="cursor-asm/cursor.hex">Cursor</option>
        </select>
        <input id="hex-input" type="file" accept=".hex">

        <label for="animate-cb">Animation</label>
        <input id="animate-cb" type="checkbox" checked>
        <label for="speed">Speed</label>
        <input id="speed"     type="number" step="1" value="5">
        <input id="reset-btn" type="button" value="Reset">
        <input id="run-btn"   type="button" value="Run">
        <input id="step-btn"  type="button" value="Step">

        <input id="fetch-btn"  class="state-btn" type="button" value="Fetch">
        <input id="decode-btn" class="state-btn" type="button" value="Decode">
        <input id="alu-btn"    class="state-btn" type="button" value="ALU">
        <input id="branch-btn" class="state-btn" type="button" value="Compare">
        <input id="write-btn"  class="state-btn" type="button" value="Mem/Reg">
        <input id="pc-btn"     class="state-btn" type="button" value="PC">
    </div>

    <div id="cell-memory" class="cell">
        <h1>Memory</h1>
        <div id="mem" class="tbl-wrapper">
            <table>
                <tr class="heading">
                    <th>Address</th>
                    <th>0</th> <th>1</th> <th>2</th> <th>3</th>
                    <th>
                        <select id="alt-mem-view-sel">
                            <option value="asm" selected>Instructions</option>
                            <option value="pseudo">Pseudo-instructions</option>
                            <option value="ascii">Characters (ASCII)</option>
                            <option value="int32">Decimal (signed 32-bit)</option>
                            <option value="uint32">Decimal (unsigned 32-bit)</option>
                            <option value="int16">Decimal (signed 16-bit)</option>
                            <option value="uint16">Decimal (unsigned 16-bit)</option>
                            <option value="int8">Decimal (signed 8-bit)</option>
                            <option value="uint8">Decimal (unsigned 8-bit)</option>
                        </select>
                    </th>
                    <th></th>
                </tr>
                <tr>
                    <th>00000000</th>
                    <td class="reg">00</td> <td class="reg">00</td> <td class="reg">00</td> <td class="reg">00</td>
                    <td class="asm">&mdash;</td>
                    <td class="brk" title="Click to set/remove a breakpoint">&#x25cf;</td>
                </tr>
            </table>
        </div>
    </div>
    <div id="cell-bus" class="cell">
        <h1>Bus</h1>
        <table>
            <tr> <th>addr</th> <td class="bus" id="addr" colspan="4"></td> </tr>
            <tr class="overlay"> <th>data</th> <!-- Affecte la ligne suivante -->
                <td class="bus" id="data3">00</td>
                <td class="bus" id="data2">00</td>
                <td class="bus" id="data1">00</td>
                <td class="bus" id="data0">00</td>
            </tr>
            <tr> <th>data</th> <td class="bus" id="data" colspan="4"></td> </tr>
            <tr> <th>irq</th>  <td class="bus" id="irq" colspan="4"></td> </tr>
        </table>
    </div>
    <div id="cell-pc" class="cell">
        <h1>Program counter</h1>
        <table>
            <tr> <th>pc</th>   <td class="reg" id="pc"></td>   </tr>
            <tr> <th>mepc</th> <td class="reg" id="mepc"></td> </tr>
            <tr> <th>pc+4</th> <td class="bus" id="pc-i"></td> </tr>
        </table>

        <div class="spacer"></div>

        <h1>Instruction reg.</h1>
        <table>
            <tr> <th>instr</th> <td class="reg" id="instr"></td> </tr>
            <tr> <th>fn</th>    <td class="bus" id="fn"></td>    </tr>
            <tr> <th>rs1</th>   <td class="bus" id="rs1"></td>   </tr>
            <tr> <th>rs2</th>   <td class="bus" id="rs2"></td>   </tr>
            <tr> <th>rd</th>    <td class="bus" id="rd"></td>    </tr>
            <tr> <th>imm</th>   <td class="bus" id="imm"></td>   </tr>
        </table>
    </div>
    <div id="cell-alu" class="cell">
        <h1>ALU</h1>
        <table>
            <tr> <th>op</th> <td class="bus" id="alu-op"></td> </tr>
            <tr> <th>a</th>  <td class="bus" id="alu-a"></td>  </tr>
            <tr> <th>b</th>  <td class="bus" id="alu-b"></td>  </tr>
            <tr> <th>r</th>  <td class="bus" id="alu-r"></td>  </tr>
        </table>

        <div class="spacer"></div>

        <h1>Comparator</h1>
        <table>
            <tr> <th>op</th>    <td class="bus" id="cmp-op"></td>    </tr>
            <tr> <th>a</th>     <td class="bus" id="cmp-a"></td>     </tr>
            <tr> <th>b</th>     <td class="bus" id="cmp-b"></td>     </tr>
            <tr> <th>taken</th> <td class="bus" id="cmp-taken"></td> </tr>
        </table>
    </div>
    <div id="cell-x" class="cell">
        <h1>General-purpose regs</h1>
        <table id="x">
            <tr> <th>x0</th>  <td class="reg" id="x0"></td>  </tr>
            <tr> <th>x1</th>  <td class="reg" id="x1"></td>  </tr>
            <tr> <th>x2</th>  <td class="reg" id="x2"></td>  </tr>
            <tr> <th>x3</th>  <td class="reg" id="x3"></td>  </tr>
            <tr> <th>x4</th>  <td class="reg" id="x4"></td>  </tr>
            <tr id="xrs1" class="overlay"></tr>
            <tr> <th>x5</th>  <td class="reg" id="x5"></td>  </tr>
            <tr> <th>x6</th>  <td class="reg" id="x6"></td>  </tr>
            <tr id="xrs2" class="overlay"></tr>
            <tr> <th>x7</th>  <td class="reg" id="x7"></td>  </tr>
            <tr> <th>x8</th>  <td class="reg" id="x8"></td>  </tr>
            <tr id="xrd" class="overlay"></tr>
            <tr> <th>x9</th>  <td class="reg" id="x9"></td>  </tr>
            <tr> <th>x10</td> <td class="reg" id="x10"></td> </tr>
            <tr> <th>x11</td> <td class="reg" id="x11"></td> </tr>
            <tr> <th>x12</td> <td class="reg" id="x12"></td> </tr>
            <tr> <th>x13</td> <td class="reg" id="x13"></td> </tr>
            <tr> <th>x14</td> <td class="reg" id="x14"></td> </tr>
            <tr> <th>x15</td> <td class="reg" id="x15"></td> </tr>
        </table>
    </div>
    <div class="cell">
        <h1>Text I/O</h1>
        <table>
            <tr>
                <th>B0000000</th>
                <td class="reg" id="memb0000000"></td>
                <td class="reg" id="memb0000001"></td>
            </tr>
        </table>

        <input id="text-input">

        <table>
            <tr> <th>C0000000</th> <td class="reg" id="memc0000000"></td> </tr>
        </table>

        <pre id="text-output"></pre>
    </div>
    <div class="cell">
        <h1>Bitmap output (00000C00&ndash;00000FFF)</h1>

        <canvas id="bitmap-output" width="160" height="160"></canvas>
    </div>
</div>

<div class="moving-value">X</div>
<div class="moving-value">X</div>
<div class="moving-value">X</div>
<div class="moving-value">X</div>

<svg xmlns="http://www.w3.org/2000/svg">
    <defs>
        <marker id="arrow-marker-bus1" class="bus1" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
            <path d="M0,0 L1,2 L0,4 L4,2Z" />
        </marker>
        <marker id="arrow-marker-bus2" class="bus2" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
            <path d="M0,0 L1,2 L0,4 L4,2Z" />
        </marker>
        <marker id="arrow-marker-bus3" class="bus3" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
            <path d="M0,0 L1,2 L0,4 L4,2Z" />
        </marker>
        <marker id="arrow-marker-active-bus1" class="active bus1" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
            <path d="M0,0 L1,2 L0,4 L4,2Z" />
        </marker>
        <marker id="arrow-marker-active-bus2" class="active bus2" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
            <path d="M0,0 L1,2 L0,4 L4,2Z" />
        </marker>
        <marker id="arrow-marker-active-bus3" class="active bus3" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
            <path d="M0,0 L1,2 L0,4 L4,2Z" />
        </marker>
    </defs>
</svg>

<script src="js/index.js" type="module"></script>
